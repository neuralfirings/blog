<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Internet Dog Treat Dispenser (v2) &middot; nyl.io
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/public/css/poole.css">
  <link rel="stylesheet" href="/blog/public/css/syntax.css">
  <link rel="stylesheet" href="/blog/public/css/lanyon.css">


  <link rel="stylesheet" href="/blog/public/css/nyl.css">
  <link rel="stylesheet" href="/blog/css/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/blog/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/blog/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Google Fonts -->

  <link href='https://fonts.googleapis.com/css?family=Lato:400,300,100,700,900' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,800' rel='stylesheet' type='text/css'>
</head>


  <body class="theme-base-08 layout-reverse">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p></p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/blog">Home</a>

    

    
    
      
        
      
    
      
        
          
            <a class="sidebar-nav-item" href="/blog/about.html">About</a>
          
        
      
    
      
    
      
        
      
    
      
        
          
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
        
          
            <a class="sidebar-nav-item" href="/blog/test.html">Test</a>
          
        
      
    

<!--     <a class="sidebar-nav-item" href="/archive/v1.0.0.zip">Download</a>
    <a class="sidebar-nav-item" href="">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.0.0</span> -->
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h2 class="masthead-title">
            <a href="/blog/" title="Home">nyl.io</a>
            <small>Random neural firings by Nancy Yi Liang.</small>
          </h2>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Internet Dog Treat Dispenser (v2)</h1>
  <span class="post-date">20 Apr 2014</span>
  <p>A few weeks ago, Ajax our dog started having separation anxiety issues—-he would cry bloody murder when we left him alone in the apartment. We crate trained him when he was 6 months old with our remote dog treat dispenser. Since then, when we leave him alone, he’s been quiet and usually just fall asleep. That is, until a few weeks ago.</p>

<p>Separation anxiety is a tricky thing to train, because you can’t there in person to correct the dog’s behavior. The bad behavior starts precisely because you are <em>not</em> there. It’s one of the top complaints among dog owners, and is the second most common reason for owners giving up or euthanizing their dogs<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>.</p>

<p>We looked at bringing back out our old treat dispenser, but it was clunky. The old version had to connect to a laptop, and the treat container was a plastic cup held together by scotch tape and paperclips. It also didn’t come with a nanny cam so we had to use Ustream, which while free, had ads and a 30 sec delay. And thus Treaty v2 was born.</p>

<p>I cobbled together this device, which streams video and audio in almost-real time (the audio has a 10 sec delay). I can use this to monitor the dog and dispense treat when he’s shows good behavior.</p>

<h2 id="dog-treaty-demo-video">Dog Treaty Demo Video</h2>

<iframe width="640" height="480" src="https://www.youtube.com/embed/mhdJi2rF1xA" frameborder="0" allowfullscreen=""></iframe>

<p>This connects to a web interface I use to monitor and treat the dog. Well technically, the Raspberry Pi serves a page with a button that controls the dispenser’s motor. I can watch/listen to what’s happen and dispense a treat by clicking a button. This is helpful when I’m out and about, want to check on Ajax and more importantly reward him when he’s being calm and quiet.</p>

<p><img src="/content/images/2015/06/1-nSa44VhzPnyBbGhgC8S1JQ.jpeg" alt="" /></p>

<h2 id="the-modeling">The Modeling</h2>
<p>The upper compartment contains the treats. You put treats between the fans, and the fan-like arm twists and scoots the treats along until it drops into the crate. The bottom compartment contains the stepper motor, which turns the fan when I click the “Give Treat” button.</p>

<p><img src="/content/images/2015/06/1-U1Z70vS2J9La8VW9wsdp0w.jpeg" alt="" /></p>

<p>Who says you can’t use <a href="http://www.blender.org">Blender</a> to design mechanical parts?</p>

<p>This mechanism works well because you can use it with a variety of different types of treats. Many dispensers (e.g. gumball machines) one works with certain geometries. We tested it with biscuits, dried fish flakes, and even leftover steak. Kudos to Aaron for thinking of this idea.</p>

<h2 id="the-hardware--webpage-setup">The hardware &amp; webpage setup</h2>

<p>For controlling the dispenser, I used a Raspberry Pi and followed <a href="https://learn.adafruit.com/adafruits-raspberry-pi-lesson-10-stepper-motors?view=all">Adafruit’s Stepper Motor Tutorial</a>. For streaming video and audio, I also used the <a href="https://github.com/moustaki/raspbaby">RaspBaby</a> setup, which installs mjpg-streamer for video and darkice running on icecast for audio. For the camera and mic, I just used an old Logitech webcam I had lying around. To serve the webpage, I set up nginx on the Raspberry Pi.</p>

<p><img src="/content/images/2015/06/1-ClASvTZusbsTV_UQrQWsdA.jpeg" alt="" /></p>

<p><img src="/content/images/2015/06/1-8JyZgw9r-KV3aEIEmRN0ig.jpeg" alt="" /></p>

<h2 id="whats-next">What’s next</h2>

<p>We’ve used this for a few times and it looks like Ajax is starting to show some improvements. Besides doggy improvements, there are also a few device improvements I’d like to work on for v3.</p>

<ol>
  <li>
    <p>I want to get more real time audio stream. It’s very important to treat the dog right after his good behavior, so it’s important the audio is as realtime as possible. Right now it has about a 10 sec delay.</p>
  </li>
  <li>
    <p>I want to put everything in one (small) box. As you can see the breadboard is quite bulky and there are a lot of wires swooping this way and that. Maybe I’ll try to design a PCB, or maybe I’ll use Adafruit’s solderable breadboard with <a href="https://www.adafruit.com/products/1148">Pi Cobbler</a>. In any case, the Raspberry Pi, wires, and treat dispenser (the cylindrical thin) should all be contained in one (probably 3d printed) case.</p>
  </li>
  <li>
    <p>Right now the treats <em>sometimes</em> hits Ajax on the head when it drops from the container. Eek! Maybe I’ll make an attachable bowl or something that catches the treats. He can eat from the bowl instead of getting whacked by bits of steak.</p>
  </li>
</ol>

<p>In the meanwhile, Ajax can just stand back a little and look forward to some tasty treats!</p>

<p><img src="/content/images/2015/06/1-inhcnpHmfX2DWqk_iXzUng.jpeg" alt="" /></p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>http://www.dogbreedinfo.com/separationanxiety.htm <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="xrelated-posts">
    
      <li>
        <h5>
          <a href="/blog/2015/09/hello-world-intro">
            Hello World Projects
            <small>07 Sep 2015</small>
          </a>
        </h5>
      </li>
    
      <li>
        <h5>
          <a href="/blog/2015/09/welcome-to-jekyll">
            Welcome to Jekyll!
            <small>07 Sep 2015</small>
          </a>
        </h5>
      </li>
    
      <li>
        <h5>
          <a href="/blog/2015/09/hello-world-custom-pcb-fritzing">
            Hello World: Design PCBs with Fritzing
            <small>05 Sep 2015</small>
          </a>
        </h5>
      </li>
    
  </ul>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
